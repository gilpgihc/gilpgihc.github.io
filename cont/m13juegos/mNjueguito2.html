<div class="horizontal">
 <section>
  <h1>Salida</h1>
  <iframe src="/src/m13juegos/Njueguito2.html" height="350" title="Versión 2 de juego"></iframe>
  <p class="noPrint">
   <a href="/src/m13juegos/Njueguito2.html" target="_blank">Ábrelo en otra
    pestaña.</a>
  </p>
  <p class="noPrint">
   <a target="_blank" rel="noopener"
     href="https://gilpgedit.github.io/#%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%0A%3Chead%3E%0A%20%3Cmeta%20charset%3D%22utf-8%22%3E%0A%20%3Cmeta%20name%3D%22viewport%22%0A%20%20%20content%3D%22width%3Ddevice-width%22%3E%0A%20%3Ctitle%3EJueguito%202%3C%2Ftitle%3E%0A%20%3Cstyle%3E%0A%20%20body%20%7B%0A%20%20%20position%3A%20fixed%3B%0A%20%20%20top%3A%200px%3B%0A%20%20%20left%3A%200px%3B%0A%20%20%20width%3A%20100%25%3B%0A%20%20%20height%3A%20100%25%3B%0A%20%20%20margin%3A%200%3B%0A%20%20%20overflow%3A%20hidden%3B%0A%20%20%7D%0A%0A%20%20.sprite%20%7B%0A%20%20%20position%3A%20fixed%3B%0A%20%20%7D%0A%20%3C%2Fstyle%3E%0A%20%3Cscript%3E%0A%20%20%2F%2F%40ts-check%0A%20%20%2F**%20%40abstract%20*%2F%0A%20%20class%20Jugador%0A%20%20%20extends%20HTMLElement%20%7B%0A%20%20%20izquierda()%20%7B%0A%20%20%20%20throw%20new%20Error(%22abstract%22)%0A%20%20%20%7D%0A%20%20%20derecha()%20%7B%0A%20%20%20%20throw%20new%20Error(%22abstract%22)%0A%20%20%20%7D%0A%20%20%20sube()%20%7B%0A%20%20%20%20throw%20new%20Error(%22abstract%22)%0A%20%20%20%7D%0A%20%20%20baja()%20%7B%0A%20%20%20%20throw%20new%20Error(%22abstract%22)%0A%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F**%20%40abstract%20*%2F%0A%20%20class%20Figura%0A%20%20%20extends%20HTMLElement%20%7B%0A%20%20%20%2F**%0A%20%20%20%20*%20%40param%20%7BHTMLElement%7D%20jugador%0A%20%20%20%20*%20%20%20el%20jugador%20que%20persigue.%0A%20%20%20%20*%2F%0A%20%20%20muevete(jugador)%20%7B%0A%20%20%20%20throw%20new%20Error(%22abstract%22)%3B%0A%20%20%20%7D%0A%20%20%7D%0A%0A%20%20class%20Juego2%20%7B%0A%20%20%20constructor()%20%7B%0A%20%20%20%20%2F**%20%40type%20%7BJugador%7D%20*%2F%0A%20%20%20%20this.jugador%20%3D%20document.%0A%20%20%20%20%20querySelector(%22.jugador%22)%0A%20%20%20%20%2F**%20%40type%20%7BFigura%5B%5D%7D%20*%2F%0A%20%20%20%20this.figuras%20%3D%20Array.from(%0A%20%20%20%20%20document.querySelectorAll(%0A%20%20%20%20%20%20%22.figura%22))%0A%20%20%20%20this.iniciaX%20%3D%20null%0A%20%20%20%20this.iniciaY%20%3D%20null%0A%20%20%20%20this.interval%20%3D%20null%0A%20%20%20%20this.activo%20%3D%20true%0A%20%20%20%7D%0A%0A%20%20%20inicia()%20%7B%0A%20%20%20%20document.addEventListener(%0A%20%20%20%20%20%22keydown%22%2C%0A%20%20%20%20%20evt%20%3D%3E%20this.teclas(evt))%0A%20%20%20%20document.addEventListener(%0A%20%20%20%20%20%22touchstart%22%2C%0A%20%20%20%20%20evt%20%3D%3E%20this.iniciaTouch(evt))%0A%20%20%20%20document.addEventListener(%0A%20%20%20%20%20%22touchmove%22%2C%0A%20%20%20%20%20evt%20%3D%3E%0A%20%20%20%20%20%20this.desplazaTouch(evt))%0A%20%20%20%20this.interval%20%3D%20setInterval(%0A%20%20%20%20%20()%20%3D%3E%20this.mueveFiguras()%2C%2060)%0A%20%20%20%7D%0A%0A%20%20%20mueveFiguras()%20%7B%0A%20%20%20%20for%20(const%20f%20of%20this.figuras)%20%7B%0A%20%20%20%20%20f.muevete(this.jugador)%0A%20%20%20%20%7D%0A%20%20%20%20this.detectaColisiones()%0A%20%20%20%7D%0A%0A%20%20%20detectaColisiones()%20%7B%0A%20%20%20%20for%20(const%20f%20of%20this.figuras)%20%7B%0A%20%20%20%20%20if%20(colisiona(%0A%20%20%20%20%20%20this.jugador%2C%20f))%20%7B%0A%20%20%20%20%20%20this.termina()%0A%20%20%20%20%20%20break%0A%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%7D%0A%0A%20%20%20termina()%20%7B%0A%20%20%20%20this.activo%20%3D%20false%0A%20%20%20%20clearInterval(this.interval)%0A%20%20%20%20alert(%22Jueguito%202%20terminado.%22)%0A%20%20%20%7D%0A%0A%20%20%20%2F**%20%40param%20%7BKeyboardEvent%7D%20evt*%2F%0A%20%20%20teclas(evt)%20%7B%0A%20%20%20%20if%20(this.activo)%20%7B%0A%20%20%20%20%20switch%20(evt.key)%20%7B%0A%20%20%20%20%20%20case%20%22ArrowLeft%22%3A%0A%20%20%20%20%20%20%20this.jugador.izquierda()%0A%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20case%20%22ArrowRight%22%3A%0A%20%20%20%20%20%20%20this.jugador.derecha()%0A%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20case%20%22ArrowUp%22%3A%0A%20%20%20%20%20%20%20this.jugador.sube()%0A%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20case%20%22ArrowDown%22%3A%0A%20%20%20%20%20%20%20this.jugador.baja()%0A%20%20%20%20%20%20%20break%0A%20%20%20%20%20%7D%0A%20%20%20%20%20this.detectaColisiones()%0A%20%20%20%20%7D%0A%20%20%20%7D%0A%0A%20%20%20%2F**%20%40param%20%7BTouchEvent%7D%20evt%20*%2F%0A%20%20%20iniciaTouch(evt)%20%7B%0A%20%20%20%20if%20(this.activo)%20%7B%0A%20%20%20%20%20const%20toqueInicial%20%3D%0A%20%20%20%20%20%20evt.touches%5B0%5D%0A%20%20%20%20%20this.iniciaX%20%3D%0A%20%20%20%20%20%20toqueInicial.clientX%0A%20%20%20%20%20this.iniciaY%20%3D%0A%20%20%20%20%20%20toqueInicial.clientY%0A%20%20%20%20%7D%0A%20%20%20%7D%0A%0A%20%20%20%2F**%20%40param%20%7BTouchEvent%7D%20evt%20*%2F%0A%20%20%20desplazaTouch(evt)%20%7B%0A%20%20%20%20if%20(this.activo%0A%20%20%20%20%20%26%26%20this.iniciaX%0A%20%20%20%20%20%26%26%20this.iniciaY)%20%7B%0A%20%20%20%20%20const%20desplazamiento%20%3D%0A%20%20%20%20%20%20evt.touches%5B0%5D%0A%20%20%20%20%20var%20desplazamientoX%20%3D%0A%20%20%20%20%20%20desplazamiento.clientX%0A%20%20%20%20%20var%20desplazamientoY%20%3D%0A%20%20%20%20%20%20desplazamiento.clientY%0A%20%20%20%20%20var%20difX%20%3D%20desplazamientoX%20-%0A%20%20%20%20%20%20this.iniciaX%0A%20%20%20%20%20var%20difY%20%3D%20desplazamientoY%20-%0A%20%20%20%20%20%20this.iniciaY%0A%20%20%20%20%20%2F*%20Checa%20que%20el%20movimiento%20no%0A%20%20%20%20%20%20*%20sea%20muy%20corto.%20*%2F%0A%20%20%20%20%20if%20(Math.abs(difX)%0A%20%20%20%20%20%20%2B%20Math.abs(difY)%0A%20%20%20%20%20%20%3E%20150)%20%7B%0A%20%20%20%20%20%20if%20(Math.abs(difX)%0A%20%20%20%20%20%20%20%3E%20Math.abs(difY))%20%7B%0A%20%20%20%20%20%20%20if%20(difX%20%3E%2070)%20%7B%0A%20%20%20%20%20%20%20%20this.jugador.derecha()%0A%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.jugador.izquierda()%0A%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20if%20(difY%20%3E%2070)%20%7B%0A%20%20%20%20%20%20%20this.jugador.baja()%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20this.jugador.sube()%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.detectaColisiones()%0A%20%20%20%20%20%20%2F%2F%20Reinicia%20valores.%0A%20%20%20%20%20%20this.iniciaX%20%3D%20null%3B%0A%20%20%20%20%20%20this.iniciaY%20%3D%20null%3B%0A%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7BHTMLElement%7D%20e1%0A%20%20%20*%20%40param%20%7BHTMLElement%7D%20e2%0A%20%20%20*%20%40returns%20%7Bboolean%7D%20true%20si%20los%0A%20%20%20*%20%20%20%20element%20colisionan.%0A%20%20%20*%2F%0A%20%20function%20colisiona(e1%2C%20e2)%20%7B%0A%20%20%20const%20rE1%20%3D%0A%20%20%20%20e1.getBoundingClientRect()%0A%20%20%20const%20rE2%20%3D%0A%20%20%20%20e2.getBoundingClientRect()%0A%20%20%20return%20(rE1.right%20%3E%3D%20rE2.left%0A%20%20%20%20%26%26%20rE1.left%20%3C%3D%20rE2.right%0A%20%20%20%20%26%26%20rE1.top%20%3C%3D%20rE2.bottom%0A%20%20%20%20%26%26%20rE1.bottom%20%3E%3D%20rE2.top)%0A%20%20%7D%0A%0A%20%20customElements.define(%0A%20%20%20%22jugador-paloma%22%2C%0A%20%20%20class%20extends%20Jugador%20%7B%0A%20%20%20%20connectedCallback()%20%7B%0A%20%20%20%20%20this.classList.add(%22sprite%22)%0A%20%20%20%20%20this.classList.add(%22jugador%22)%0A%20%20%20%20%20this.innerHTML%20%2B%3D%20%22%F0%9F%95%8A%22%0A%20%20%20%20%20this.style.fontSize%20%3D%20%2260px%22%0A%20%20%20%20%20const%20raiz%20%3D%0A%20%20%20%20%20%20document.documentElement%0A%20%20%20%20%20const%20r%20%3D%0A%20%20%20%20%20%20this.getBoundingClientRect()%0A%20%20%20%20%20const%20left%20%3D%0A%20%20%20%20%20%20(raiz.clientWidth%0A%20%20%20%20%20%20%20-%20r.width)%20%2F%0A%20%20%20%20%20%202%0A%20%20%20%20%20const%20top%20%3D%0A%20%20%20%20%20%20(raiz.clientHeight%20-%0A%20%20%20%20%20%20%20r.height)%20%2F%0A%20%20%20%20%20%202%0A%20%20%20%20%20this.style.left%20%3D%20%60%24%7Bleft%7Dpx%60%0A%20%20%20%20%20this.style.top%20%3D%20%60%24%7Btop%7Dpx%60%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%20%40override%20*%2F%0A%20%20%20%20sube()%20%7B%0A%20%20%20%20%20const%20top%20%3D%0A%20%20%20%20%20%20this.getBoundingClientRect().%0A%20%20%20%20%20%20%20top%20-%0A%20%20%20%20%20%2020%0A%20%20%20%20%20this.style.top%20%3D%20%60%24%7Btop%7Dpx%60%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%20%40override%20*%2F%0A%20%20%20%20baja()%20%7B%0A%20%20%20%20%20const%20top%20%3D%0A%20%20%20%20%20%20this.getBoundingClientRect().%0A%20%20%20%20%20%20%20top%20%2B%0A%20%20%20%20%20%2020%0A%20%20%20%20%20this.style.top%20%3D%20%60%24%7Btop%7Dpx%60%0A%20%20%20%20%7D%0A%0A%20%20%20%20izquierda()%20%7B%0A%20%20%20%20%20const%20left%20%3D%0A%20%20%20%20%20%20this.getBoundingClientRect().%0A%20%20%20%20%20%20%20left%20-%0A%20%20%20%20%20%2020%0A%20%20%20%20%20this.style.left%20%3D%20%60%24%7Bleft%7Dpx%60%0A%20%20%20%20%7D%0A%0A%20%20%20%20derecha()%20%7B%0A%20%20%20%20%20const%20left%20%3D%0A%20%20%20%20%20%20this.getBoundingClientRect().%0A%20%20%20%20%20%20%20left%20%2B%0A%20%20%20%20%20%2020%0A%20%20%20%20%20this.style.left%20%3D%20%60%24%7Bleft%7Dpx%60%0A%20%20%20%20%7D%0A%20%20%20%7D)%0A%0A%20%20customElements.define(%0A%20%20%20%22figura-aguila%22%2C%0A%20%20%20class%20extends%20Figura%20%7B%0A%20%20%20%20connectedCallback()%20%7B%0A%20%20%20%20%20this.classList.add(%22sprite%22)%0A%20%20%20%20%20this.classList.add(%22figura%22)%0A%20%20%20%20%20this.innerHTML%20%3D%20%22%F0%9F%A6%85%22%0A%20%20%20%20%20this.style.fontSize%20%3D%20%2240px%22%0A%20%20%20%20%20const%20r%20%3D%0A%20%20%20%20%20%20this.getBoundingClientRect()%0A%20%20%20%20%20this.style.left%20%3D%0A%20%20%20%20%20%20%60%24%7Br.left%7Dpx%60%0A%20%20%20%20%20this.style.top%20%3D%20%60%24%7Br.top%7Dpx%60%0A%20%20%20%20%20this.style.bottom%20%3D%20%22auto%22%0A%20%20%20%20%20this.style.right%20%3D%20%22auto%22%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40param%20%7BHTMLElement%7D%20jugador%0A%20%20%20%20%20*%20%20%20el%20jugador%20que%20es%0A%20%20%20%20%20*%20%20%20perseguido.%0A%20%20%20%20%20*%20%40override%0A%20%20%20%20%20*%2F%0A%20%20%20%20muevete(jugador)%20%7B%0A%20%20%20%20%20const%20r%20%3D%0A%20%20%20%20%20%20this.getBoundingClientRect()%0A%20%20%20%20%20const%20rJ%20%3D%20jugador.%0A%20%20%20%20%20%20getBoundingClientRect()%0A%20%20%20%20%20const%20y2%20%3D%20rJ.top%0A%20%20%20%20%20const%20y1%20%3D%20r.top%0A%20%20%20%20%20const%20x2%20%3D%20rJ.left%0A%20%20%20%20%20const%20x1%20%3D%20r.left%0A%20%20%20%20%20const%20pendiente%20%3D%20x2%20%3D%3D%3D%20x1%20%3F%0A%20%20%20%20%20%200%20%3A%0A%20%20%20%20%20%20(y2%20-%20y1)%20%2F%20(x2%20-%20x1)%0A%20%20%20%20%20const%20direcci%C3%B3n%20%3D%0A%20%20%20%20%20%20x2%20%3E%20x1%20%3F%201%20%3A%20-1%0A%20%20%20%20%20const%20x%20%3D%20x1%20%2B%20direcci%C3%B3n%20*%205%0A%20%20%20%20%20const%20y%20%3D%0A%20%20%20%20%20%20pendiente%20*%20(x%20-%20x1)%20%2B%20y1%0A%20%20%20%20%20%2F*%20Evita%20que%20las%20figuras%20se%0A%20%20%20%20%20%20*%20peguen%2C%20a%C3%B1adiendo%20un%0A%20%20%20%20%20%20*%20movimiento%20aleatorio.%20*%2F%0A%20%20%20%20%20this.style.left%20%3D%0A%20%20%20%20%20%20%60%24%7Bdesv%C3%ADa(x)%7Dpx%60%0A%20%20%20%20%20this.style.top%20%3D%0A%20%20%20%20%20%20%60%24%7Bdesv%C3%ADa(y)%7Dpx%60%0A%20%20%20%20%7D%0A%20%20%20%7D)%0A%0A%20%20%2F**%0A%20%20%20*%20Obtiene%20una%20desviaci%C3%B3n%0A%20%20%20*%20aleatoria%20de%2010%20alrededor%20del%0A%20%20%20*%20valor%20i.%0A%20%20%20*%20%40param%20%7Bnumber%7D%20i%20valor%20base%0A%20%20%20*%2F%0A%20%20function%20desv%C3%ADa(i)%20%7B%0A%20%20%20return%20i%20%2B%2010%20-%0A%20%20%20%2020%20*%20Math.random()%0A%20%20%7D%0A%20%3C%2Fscript%3E%0A%3C%2Fhead%3E%0A%0A%3Cbody%3E%0A%20%3Cjugador-paloma%3E%3C%2Fjugador-paloma%3E%0A%20%3Cfigura-aguila%0A%20%20%20style%3D%22right%3A%200%3B%20top%3A%200%3B%22%3E%0A%20%3C%2Ffigura-aguila%3E%0A%20%3Cfigura-aguila%0A%20%20%20style%3D%22right%3A%200%3B%20bottom%3A%200%3B%22%3E%0A%20%3C%2Ffigura-aguila%3E%0A%20%3Cscript%3E%0A%20%20%2F%2F%40ts-check%0A%20%20const%20juego2%20%3D%20new%20Juego2()%0A%20%20juego2.inicia()%0A%20%3C%2Fscript%3E%0A%3C%2Fbody%3E%0A%0A%3C%2Fhtml%3E">
    Revísalo en gilpgedit.
   </a>
  </p>
 </section>
 <muestra-codigo><div><div><span style="color: #800000;">&lt;!DOCTYPE</span> <span style="color: #ff0000;">html</span><span style="color: #800000;">&gt;</span></div><div><span style="color: #800000;">&lt;html&gt;</span></div><br><div><span style="color: #800000;">&lt;head&gt;</span></div><div>&nbsp;<span style="color: #800000;">&lt;meta</span> <span style="color: #ff0000;">charset</span>=<span style="color: #0000ff;">"utf-8"</span><span style="color: #800000;">&gt;</span></div><div>&nbsp;<span style="color: #800000;">&lt;meta</span> <span style="color: #ff0000;">name</span>=<span style="color: #0000ff;">"viewport"</span></div><div>&nbsp; &nbsp;<span style="color: #ff0000;">content</span>=<span style="color: #0000ff;">"width=device-width"</span><span style="color: #800000;">&gt;</span></div><div>&nbsp;<span style="color: #800000;">&lt;title&gt;</span>Jueguito 2<span style="color: #800000;">&lt;/title&gt;</span></div><div>&nbsp;<span style="color: #800000;">&lt;style&gt;</span></div><div>&nbsp; <span style="color: #800000;">body</span> {</div><div>&nbsp; &nbsp;<span style="color: #ff0000;">position</span>: <span style="color: #0451a5;">fixed</span>;</div><div>&nbsp; &nbsp;<span style="color: #ff0000;">top</span>: <span style="color: #098658;">0px</span>;</div><div>&nbsp; &nbsp;<span style="color: #ff0000;">left</span>: <span style="color: #098658;">0px</span>;</div><div>&nbsp; &nbsp;<span style="color: #ff0000;">width</span>: <span style="color: #098658;">100%</span>;</div><div>&nbsp; &nbsp;<span style="color: #ff0000;">height</span>: <span style="color: #098658;">100%</span>;</div><div>&nbsp; &nbsp;<span style="color: #ff0000;">margin</span>: <span style="color: #098658;">0</span>;</div><div>&nbsp; &nbsp;<span style="color: #ff0000;">overflow</span>: <span style="color: #0451a5;">hidden</span>;</div><div>&nbsp; }</div><br><div>&nbsp; <span style="color: #800000;">.sprite</span> {</div><div>&nbsp; &nbsp;<span style="color: #ff0000;">position</span>: <span style="color: #0451a5;">fixed</span>;</div><div>&nbsp; }</div><div>&nbsp;<span style="color: #800000;">&lt;/style&gt;</span></div><div>&nbsp;<span style="color: #800000;">&lt;script&gt;</span></div><div>&nbsp; <span style="color: #008000;">//@ts-check</span></div><div>&nbsp; <span style="color: #008000;">/** @abstract */</span></div><div>&nbsp; <span style="color: #0000ff;">class</span> <span style="color: #267f99;">Jugador</span></div><div>&nbsp; &nbsp;<span style="color: #0000ff;">extends</span> <span style="color: #267f99;">HTMLElement</span> {</div><div>&nbsp; &nbsp;<span style="color: #795e26;">izquierda</span>() {</div><div>&nbsp; &nbsp; <span style="color: #af00db;">throw</span> <span style="color: #0000ff;">new</span> <span style="color: #267f99;">Error</span>(<span style="color: #a31515;">"abstract"</span>)</div><div>&nbsp; &nbsp;}</div><div>&nbsp; &nbsp;<span style="color: #795e26;">derecha</span>() {</div><div>&nbsp; &nbsp; <span style="color: #af00db;">throw</span> <span style="color: #0000ff;">new</span> <span style="color: #267f99;">Error</span>(<span style="color: #a31515;">"abstract"</span>)</div><div>&nbsp; &nbsp;}</div><div>&nbsp; &nbsp;<span style="color: #795e26;">sube</span>() {</div><div>&nbsp; &nbsp; <span style="color: #af00db;">throw</span> <span style="color: #0000ff;">new</span> <span style="color: #267f99;">Error</span>(<span style="color: #a31515;">"abstract"</span>)</div><div>&nbsp; &nbsp;}</div><div>&nbsp; &nbsp;<span style="color: #795e26;">baja</span>() {</div><div>&nbsp; &nbsp; <span style="color: #af00db;">throw</span> <span style="color: #0000ff;">new</span> <span style="color: #267f99;">Error</span>(<span style="color: #a31515;">"abstract"</span>)</div><div>&nbsp; &nbsp;}</div><div>&nbsp; }</div><br><div>&nbsp; <span style="color: #008000;">/** @abstract */</span></div><div>&nbsp; <span style="color: #0000ff;">class</span> <span style="color: #267f99;">Figura</span></div><div>&nbsp; &nbsp;<span style="color: #0000ff;">extends</span> <span style="color: #267f99;">HTMLElement</span> {</div><div>&nbsp; &nbsp;<span style="color: #008000;">/**</span></div><div><span style="color: #008000;">&nbsp; &nbsp; * </span><span style="color: #0000ff;">@param</span><span style="color: #008000;"> </span><span style="color: #267f99;">{HTMLElement}</span><span style="color: #008000;"> </span><span style="color: #001080;">jugador</span></div><div><span style="color: #008000;">&nbsp; &nbsp; * &nbsp; el jugador que persigue.</span></div><div><span style="color: #008000;">&nbsp; &nbsp; */</span></div><div>&nbsp; &nbsp;<span style="color: #795e26;">muevete</span>(<span style="color: #001080;">jugador</span>) {</div><div>&nbsp; &nbsp; <span style="color: #af00db;">throw</span> <span style="color: #0000ff;">new</span> <span style="color: #267f99;">Error</span>(<span style="color: #a31515;">"abstract"</span>);</div><div>&nbsp; &nbsp;}</div><div>&nbsp; }</div><br><div>&nbsp; <span style="color: #0000ff;">class</span> <span style="color: #267f99;">Juego2</span> {</div><div>&nbsp; &nbsp;<span style="color: #0000ff;">constructor</span>() {</div><div>&nbsp; &nbsp; <span style="color: #008000;">/** </span><span style="color: #0000ff;">@type</span><span style="color: #008000;"> </span><span style="color: #267f99;">{Jugador}</span><span style="color: #008000;"> */</span></div><div>&nbsp; &nbsp; <span style="color: #0000ff;">this</span>.<span style="color: #001080;">jugador</span> = <span style="color: #001080;">document</span>.</div><div>&nbsp; &nbsp; &nbsp;<span style="color: #795e26;">querySelector</span>(<span style="color: #a31515;">".jugador"</span>)</div><div>&nbsp; &nbsp; <span style="color: #008000;">/** </span><span style="color: #0000ff;">@type</span><span style="color: #008000;"> </span><span style="color: #267f99;">{Figura[]}</span><span style="color: #008000;"> */</span></div><div>&nbsp; &nbsp; <span style="color: #0000ff;">this</span>.<span style="color: #001080;">figuras</span> = <span style="color: #267f99;">Array</span>.<span style="color: #795e26;">from</span>(</div><div>&nbsp; &nbsp; &nbsp;<span style="color: #001080;">document</span>.<span style="color: #795e26;">querySelectorAll</span>(</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #a31515;">".figura"</span>))</div><div>&nbsp; &nbsp; <span style="color: #0000ff;">this</span>.<span style="color: #001080;">iniciaX</span> = <span style="color: #0000ff;">null</span></div><div>&nbsp; &nbsp; <span style="color: #0000ff;">this</span>.<span style="color: #001080;">iniciaY</span> = <span style="color: #0000ff;">null</span></div><div>&nbsp; &nbsp; <span style="color: #0000ff;">this</span>.<span style="color: #001080;">interval</span> = <span style="color: #0000ff;">null</span></div><div>&nbsp; &nbsp; <span style="color: #0000ff;">this</span>.<span style="color: #001080;">activo</span> = <span style="color: #0000ff;">true</span></div><div>&nbsp; &nbsp;}</div><br><div>&nbsp; &nbsp;<span style="color: #795e26;">inicia</span>() {</div><div>&nbsp; &nbsp; <span style="color: #001080;">document</span>.<span style="color: #795e26;">addEventListener</span>(</div><div>&nbsp; &nbsp; &nbsp;<span style="color: #a31515;">"keydown"</span>,</div><div>&nbsp; &nbsp; &nbsp;<span style="color: #001080;">evt</span> <span style="color: #0000ff;">=&gt;</span> <span style="color: #0000ff;">this</span>.<span style="color: #795e26;">teclas</span>(<span style="color: #001080;">evt</span>))</div><div>&nbsp; &nbsp; <span style="color: #001080;">document</span>.<span style="color: #795e26;">addEventListener</span>(</div><div>&nbsp; &nbsp; &nbsp;<span style="color: #a31515;">"touchstart"</span>,</div><div>&nbsp; &nbsp; &nbsp;<span style="color: #001080;">evt</span> <span style="color: #0000ff;">=&gt;</span> <span style="color: #0000ff;">this</span>.<span style="color: #795e26;">iniciaTouch</span>(<span style="color: #001080;">evt</span>))</div><div>&nbsp; &nbsp; <span style="color: #001080;">document</span>.<span style="color: #795e26;">addEventListener</span>(</div><div>&nbsp; &nbsp; &nbsp;<span style="color: #a31515;">"touchmove"</span>,</div><div>&nbsp; &nbsp; &nbsp;<span style="color: #001080;">evt</span> <span style="color: #0000ff;">=&gt;</span></div><div>&nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">this</span>.<span style="color: #795e26;">desplazaTouch</span>(<span style="color: #001080;">evt</span>))</div><div>&nbsp; &nbsp; <span style="color: #0000ff;">this</span>.<span style="color: #001080;">interval</span> = <span style="color: #795e26;">setInterval</span>(</div><div>&nbsp; &nbsp; &nbsp;() <span style="color: #0000ff;">=&gt;</span> <span style="color: #0000ff;">this</span>.<span style="color: #795e26;">mueveFiguras</span>(), <span style="color: #098658;">60</span>)</div><div>&nbsp; &nbsp;}</div><br><div>&nbsp; &nbsp;<span style="color: #795e26;">mueveFiguras</span>() {</div><div>&nbsp; &nbsp; <span style="color: #af00db;">for</span> (<span style="color: #0000ff;">const</span> <span style="color: #0070c1;">f</span> <span style="color: #0000ff;">of</span> <span style="color: #0000ff;">this</span>.<span style="color: #001080;">figuras</span>) {</div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0070c1;">f</span>.<span style="color: #795e26;">muevete</span>(<span style="color: #0000ff;">this</span>.<span style="color: #001080;">jugador</span>)</div><div>&nbsp; &nbsp; }</div><div>&nbsp; &nbsp; <span style="color: #0000ff;">this</span>.<span style="color: #795e26;">detectaColisiones</span>()</div><div>&nbsp; &nbsp;}</div><br><div>&nbsp; &nbsp;<span style="color: #795e26;">detectaColisiones</span>() {</div><div>&nbsp; &nbsp; <span style="color: #af00db;">for</span> (<span style="color: #0000ff;">const</span> <span style="color: #0070c1;">f</span> <span style="color: #0000ff;">of</span> <span style="color: #0000ff;">this</span>.<span style="color: #001080;">figuras</span>) {</div><div>&nbsp; &nbsp; &nbsp;<span style="color: #af00db;">if</span> (<span style="color: #795e26;">colisiona</span>(</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">this</span>.<span style="color: #001080;">jugador</span>, <span style="color: #0070c1;">f</span>)) {</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">this</span>.<span style="color: #795e26;">termina</span>()</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #af00db;">break</span></div><div>&nbsp; &nbsp; &nbsp;}</div><div>&nbsp; &nbsp; }</div><div>&nbsp; &nbsp;}</div><br><div>&nbsp; &nbsp;<span style="color: #795e26;">termina</span>() {</div><div>&nbsp; &nbsp; <span style="color: #0000ff;">this</span>.<span style="color: #001080;">activo</span> = <span style="color: #0000ff;">false</span></div><div>&nbsp; &nbsp; <span style="color: #795e26;">clearInterval</span>(<span style="color: #0000ff;">this</span>.<span style="color: #001080;">interval</span>)</div><div>&nbsp; &nbsp; <span style="color: #795e26;">alert</span>(<span style="color: #a31515;">"Jueguito 2 terminado."</span>)</div><div>&nbsp; &nbsp;}</div><br><div>&nbsp; &nbsp;<span style="color: #008000;">/** </span><span style="color: #0000ff;">@param</span><span style="color: #008000;"> </span><span style="color: #267f99;">{KeyboardEvent}</span><span style="color: #008000;"> </span><span style="color: #001080;">evt</span><span style="color: #008000;">*/</span></div><div>&nbsp; &nbsp;<span style="color: #795e26;">teclas</span>(<span style="color: #001080;">evt</span>) {</div><div>&nbsp; &nbsp; <span style="color: #af00db;">if</span> (<span style="color: #0000ff;">this</span>.<span style="color: #001080;">activo</span>) {</div><div>&nbsp; &nbsp; &nbsp;<span style="color: #af00db;">switch</span> (<span style="color: #001080;">evt</span>.<span style="color: #0070c1;">key</span>) {</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #af00db;">case</span> <span style="color: #a31515;">"ArrowLeft"</span>:</div><div>&nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">this</span>.<span style="color: #001080;">jugador</span>.<span style="color: #795e26;">izquierda</span>()</div><div>&nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #af00db;">break</span></div><div>&nbsp; &nbsp; &nbsp; <span style="color: #af00db;">case</span> <span style="color: #a31515;">"ArrowRight"</span>:</div><div>&nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">this</span>.<span style="color: #001080;">jugador</span>.<span style="color: #795e26;">derecha</span>()</div><div>&nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #af00db;">break</span></div><div>&nbsp; &nbsp; &nbsp; <span style="color: #af00db;">case</span> <span style="color: #a31515;">"ArrowUp"</span>:</div><div>&nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">this</span>.<span style="color: #001080;">jugador</span>.<span style="color: #795e26;">sube</span>()</div><div>&nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #af00db;">break</span></div><div>&nbsp; &nbsp; &nbsp; <span style="color: #af00db;">case</span> <span style="color: #a31515;">"ArrowDown"</span>:</div><div>&nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">this</span>.<span style="color: #001080;">jugador</span>.<span style="color: #795e26;">baja</span>()</div><div>&nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #af00db;">break</span></div><div>&nbsp; &nbsp; &nbsp;}</div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">this</span>.<span style="color: #795e26;">detectaColisiones</span>()</div><div>&nbsp; &nbsp; }</div><div>&nbsp; &nbsp;}</div><br><div>&nbsp; &nbsp;<span style="color: #008000;">/** </span><span style="color: #0000ff;">@param</span><span style="color: #008000;"> </span><span style="color: #267f99;">{TouchEvent}</span><span style="color: #008000;"> </span><span style="color: #001080;">evt</span><span style="color: #008000;"> */</span></div><div>&nbsp; &nbsp;<span style="color: #795e26;">iniciaTouch</span>(<span style="color: #001080;">evt</span>) {</div><div>&nbsp; &nbsp; <span style="color: #af00db;">if</span> (<span style="color: #0000ff;">this</span>.<span style="color: #001080;">activo</span>) {</div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">const</span> <span style="color: #0070c1;">toqueInicial</span> =</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #001080;">evt</span>.<span style="color: #0070c1;">touches</span>[<span style="color: #098658;">0</span>]</div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">this</span>.<span style="color: #001080;">iniciaX</span> =</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #0070c1;">toqueInicial</span>.<span style="color: #0070c1;">clientX</span></div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">this</span>.<span style="color: #001080;">iniciaY</span> =</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #0070c1;">toqueInicial</span>.<span style="color: #0070c1;">clientY</span></div><div>&nbsp; &nbsp; }</div><div>&nbsp; &nbsp;}</div><br><div>&nbsp; &nbsp;<span style="color: #008000;">/** </span><span style="color: #0000ff;">@param</span><span style="color: #008000;"> </span><span style="color: #267f99;">{TouchEvent}</span><span style="color: #008000;"> </span><span style="color: #001080;">evt</span><span style="color: #008000;"> */</span></div><div>&nbsp; &nbsp;<span style="color: #795e26;">desplazaTouch</span>(<span style="color: #001080;">evt</span>) {</div><div>&nbsp; &nbsp; <span style="color: #af00db;">if</span> (<span style="color: #0000ff;">this</span>.<span style="color: #001080;">activo</span></div><div>&nbsp; &nbsp; &nbsp;&amp;&amp; <span style="color: #0000ff;">this</span>.<span style="color: #001080;">iniciaX</span></div><div>&nbsp; &nbsp; &nbsp;&amp;&amp; <span style="color: #0000ff;">this</span>.<span style="color: #001080;">iniciaY</span>) {</div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">const</span> <span style="color: #0070c1;">desplazamiento</span> =</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #001080;">evt</span>.<span style="color: #0070c1;">touches</span>[<span style="color: #098658;">0</span>]</div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">var</span> <span style="color: #001080;">desplazamientoX</span> =</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #0070c1;">desplazamiento</span>.<span style="color: #0070c1;">clientX</span></div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">var</span> <span style="color: #001080;">desplazamientoY</span> =</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #0070c1;">desplazamiento</span>.<span style="color: #0070c1;">clientY</span></div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">var</span> <span style="color: #001080;">difX</span> = <span style="color: #001080;">desplazamientoX</span> -</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">this</span>.<span style="color: #001080;">iniciaX</span></div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">var</span> <span style="color: #001080;">difY</span> = <span style="color: #001080;">desplazamientoY</span> -</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">this</span>.<span style="color: #001080;">iniciaY</span></div><div>&nbsp; &nbsp; &nbsp;<span style="color: #008000;">/* Checa que el movimiento no</span></div><div><span style="color: #008000;">&nbsp; &nbsp; &nbsp; * sea muy corto. */</span></div><div>&nbsp; &nbsp; &nbsp;<span style="color: #af00db;">if</span> (<span style="color: #267f99;">Math</span>.<span style="color: #795e26;">abs</span>(<span style="color: #001080;">difX</span>)</div><div>&nbsp; &nbsp; &nbsp; + <span style="color: #267f99;">Math</span>.<span style="color: #795e26;">abs</span>(<span style="color: #001080;">difY</span>)</div><div>&nbsp; &nbsp; &nbsp; &gt; <span style="color: #098658;">150</span>) {</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #af00db;">if</span> (<span style="color: #267f99;">Math</span>.<span style="color: #795e26;">abs</span>(<span style="color: #001080;">difX</span>)</div><div>&nbsp; &nbsp; &nbsp; &nbsp;&gt; <span style="color: #267f99;">Math</span>.<span style="color: #795e26;">abs</span>(<span style="color: #001080;">difY</span>)) {</div><div>&nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #af00db;">if</span> (<span style="color: #001080;">difX</span> &gt; <span style="color: #098658;">70</span>) {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">this</span>.<span style="color: #001080;">jugador</span>.<span style="color: #795e26;">derecha</span>()</div><div>&nbsp; &nbsp; &nbsp; &nbsp;} <span style="color: #af00db;">else</span> {</div><div>&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">this</span>.<span style="color: #001080;">jugador</span>.<span style="color: #795e26;">izquierda</span>()</div><div>&nbsp; &nbsp; &nbsp; &nbsp;}</div><div>&nbsp; &nbsp; &nbsp; } <span style="color: #af00db;">else</span> <span style="color: #af00db;">if</span> (<span style="color: #001080;">difY</span> &gt; <span style="color: #098658;">70</span>) {</div><div>&nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">this</span>.<span style="color: #001080;">jugador</span>.<span style="color: #795e26;">baja</span>()</div><div>&nbsp; &nbsp; &nbsp; } <span style="color: #af00db;">else</span> {</div><div>&nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">this</span>.<span style="color: #001080;">jugador</span>.<span style="color: #795e26;">sube</span>()</div><div>&nbsp; &nbsp; &nbsp; }</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">this</span>.<span style="color: #795e26;">detectaColisiones</span>()</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #008000;">// Reinicia valores.</span></div><div>&nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">this</span>.<span style="color: #001080;">iniciaX</span> = <span style="color: #0000ff;">null</span>;</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">this</span>.<span style="color: #001080;">iniciaY</span> = <span style="color: #0000ff;">null</span>;</div><div>&nbsp; &nbsp; &nbsp;}</div><div>&nbsp; &nbsp; }</div><div>&nbsp; &nbsp;}</div><div>&nbsp; }</div><br><div>&nbsp; <span style="color: #008000;">/**</span></div><div><span style="color: #008000;">&nbsp; &nbsp;* @param {HTMLElement} e1</span></div><div><span style="color: #008000;">&nbsp; &nbsp;* @param {HTMLElement} e2</span></div><div><span style="color: #008000;">&nbsp; &nbsp;* @returns {boolean} true si los</span></div><div><span style="color: #008000;">&nbsp; &nbsp;* &nbsp; &nbsp;element colisionan.</span></div><div><span style="color: #008000;">&nbsp; &nbsp;*/</span></div><div>&nbsp; <span style="color: #0000ff;">function</span> <span style="color: #795e26;">colisiona</span>(<span style="color: #001080;">e1</span>, <span style="color: #001080;">e2</span>) {</div><div>&nbsp; &nbsp;<span style="color: #0000ff;">const</span> <span style="color: #0070c1;">rE1</span> =</div><div>&nbsp; &nbsp; <span style="color: #001080;">e1</span>.<span style="color: #795e26;">getBoundingClientRect</span>()</div><div>&nbsp; &nbsp;<span style="color: #0000ff;">const</span> <span style="color: #0070c1;">rE2</span> =</div><div>&nbsp; &nbsp; <span style="color: #001080;">e2</span>.<span style="color: #795e26;">getBoundingClientRect</span>()</div><div>&nbsp; &nbsp;<span style="color: #af00db;">return</span> (<span style="color: #0070c1;">rE1</span>.<span style="color: #0070c1;">right</span> &gt;= <span style="color: #0070c1;">rE2</span>.<span style="color: #0070c1;">left</span></div><div>&nbsp; &nbsp; &amp;&amp; <span style="color: #0070c1;">rE1</span>.<span style="color: #0070c1;">left</span> &lt;= <span style="color: #0070c1;">rE2</span>.<span style="color: #0070c1;">right</span></div><div>&nbsp; &nbsp; &amp;&amp; <span style="color: #0070c1;">rE1</span>.<span style="color: #0070c1;">top</span> &lt;= <span style="color: #0070c1;">rE2</span>.<span style="color: #0070c1;">bottom</span></div><div>&nbsp; &nbsp; &amp;&amp; <span style="color: #0070c1;">rE1</span>.<span style="color: #0070c1;">bottom</span> &gt;= <span style="color: #0070c1;">rE2</span>.<span style="color: #0070c1;">top</span>)</div><div>&nbsp; }</div><br><div>&nbsp; <span style="color: #001080;">customElements</span>.<span style="color: #795e26;">define</span>(</div><div>&nbsp; &nbsp;<span style="color: #a31515;">"jugador-paloma"</span>,</div><div>&nbsp; &nbsp;<span style="color: #0000ff;">class</span> <span style="color: #0000ff;">extends</span> <span style="color: #267f99;">Jugador</span> {</div><div>&nbsp; &nbsp; <span style="color: #795e26;">connectedCallback</span>() {</div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">this</span>.<span style="color: #0070c1;">classList</span>.<span style="color: #795e26;">add</span>(<span style="color: #a31515;">"sprite"</span>)</div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">this</span>.<span style="color: #0070c1;">classList</span>.<span style="color: #795e26;">add</span>(<span style="color: #a31515;">"jugador"</span>)</div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">this</span>.<span style="color: #001080;">innerHTML</span> += <span style="color: #a31515;">"🕊"</span></div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">this</span>.<span style="color: #0070c1;">style</span>.<span style="color: #001080;">fontSize</span> = <span style="color: #a31515;">"60px"</span></div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">const</span> <span style="color: #0070c1;">raiz</span> =</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #001080;">document</span>.<span style="color: #0070c1;">documentElement</span></div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">const</span> <span style="color: #0070c1;">r</span> =</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">this</span>.<span style="color: #795e26;">getBoundingClientRect</span>()</div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">const</span> <span style="color: #0070c1;">left</span> =</div><div>&nbsp; &nbsp; &nbsp; (<span style="color: #0070c1;">raiz</span>.<span style="color: #0070c1;">clientWidth</span></div><div>&nbsp; &nbsp; &nbsp; &nbsp;- <span style="color: #0070c1;">r</span>.<span style="color: #001080;">width</span>) /</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #098658;">2</span></div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">const</span> <span style="color: #0070c1;">top</span> =</div><div>&nbsp; &nbsp; &nbsp; (<span style="color: #0070c1;">raiz</span>.<span style="color: #0070c1;">clientHeight</span> -</div><div>&nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #0070c1;">r</span>.<span style="color: #001080;">height</span>) /</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #098658;">2</span></div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">this</span>.<span style="color: #0070c1;">style</span>.<span style="color: #001080;">left</span> = <span style="color: #a31515;">`</span><span style="color: #0000ff;">${</span><span style="color: #0070c1;">left</span><span style="color: #0000ff;">}</span><span style="color: #a31515;">px`</span></div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">this</span>.<span style="color: #0070c1;">style</span>.<span style="color: #001080;">top</span> = <span style="color: #a31515;">`</span><span style="color: #0000ff;">${</span><span style="color: #0070c1;">top</span><span style="color: #0000ff;">}</span><span style="color: #a31515;">px`</span></div><div>&nbsp; &nbsp; }</div><br><div>&nbsp; &nbsp; <span style="color: #008000;">/** </span><span style="color: #0000ff;">@override</span><span style="color: #008000;"> */</span></div><div>&nbsp; &nbsp; <span style="color: #795e26;">sube</span>() {</div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">const</span> <span style="color: #0070c1;">top</span> =</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">this</span>.<span style="color: #795e26;">getBoundingClientRect</span>().</div><div>&nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #0070c1;">top</span> -</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #098658;">20</span></div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">this</span>.<span style="color: #0070c1;">style</span>.<span style="color: #001080;">top</span> = <span style="color: #a31515;">`</span><span style="color: #0000ff;">${</span><span style="color: #0070c1;">top</span><span style="color: #0000ff;">}</span><span style="color: #a31515;">px`</span></div><div>&nbsp; &nbsp; }</div><br><div>&nbsp; &nbsp; <span style="color: #008000;">/** </span><span style="color: #0000ff;">@override</span><span style="color: #008000;"> */</span></div><div>&nbsp; &nbsp; <span style="color: #795e26;">baja</span>() {</div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">const</span> <span style="color: #0070c1;">top</span> =</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">this</span>.<span style="color: #795e26;">getBoundingClientRect</span>().</div><div>&nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #0070c1;">top</span> +</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #098658;">20</span></div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">this</span>.<span style="color: #0070c1;">style</span>.<span style="color: #001080;">top</span> = <span style="color: #a31515;">`</span><span style="color: #0000ff;">${</span><span style="color: #0070c1;">top</span><span style="color: #0000ff;">}</span><span style="color: #a31515;">px`</span></div><div>&nbsp; &nbsp; }</div><br><div>&nbsp; &nbsp; <span style="color: #795e26;">izquierda</span>() {</div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">const</span> <span style="color: #0070c1;">left</span> =</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">this</span>.<span style="color: #795e26;">getBoundingClientRect</span>().</div><div>&nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #0070c1;">left</span> -</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #098658;">20</span></div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">this</span>.<span style="color: #0070c1;">style</span>.<span style="color: #001080;">left</span> = <span style="color: #a31515;">`</span><span style="color: #0000ff;">${</span><span style="color: #0070c1;">left</span><span style="color: #0000ff;">}</span><span style="color: #a31515;">px`</span></div><div>&nbsp; &nbsp; }</div><br><div>&nbsp; &nbsp; <span style="color: #795e26;">derecha</span>() {</div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">const</span> <span style="color: #0070c1;">left</span> =</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">this</span>.<span style="color: #795e26;">getBoundingClientRect</span>().</div><div>&nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #0070c1;">left</span> +</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #098658;">20</span></div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">this</span>.<span style="color: #0070c1;">style</span>.<span style="color: #001080;">left</span> = <span style="color: #a31515;">`</span><span style="color: #0000ff;">${</span><span style="color: #0070c1;">left</span><span style="color: #0000ff;">}</span><span style="color: #a31515;">px`</span></div><div>&nbsp; &nbsp; }</div><div>&nbsp; &nbsp;})</div><br><div>&nbsp; <span style="color: #001080;">customElements</span>.<span style="color: #795e26;">define</span>(</div><div>&nbsp; &nbsp;<span style="color: #a31515;">"figura-aguila"</span>,</div><div>&nbsp; &nbsp;<span style="color: #0000ff;">class</span> <span style="color: #0000ff;">extends</span> <span style="color: #267f99;">Figura</span> {</div><div>&nbsp; &nbsp; <span style="color: #795e26;">connectedCallback</span>() {</div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">this</span>.<span style="color: #0070c1;">classList</span>.<span style="color: #795e26;">add</span>(<span style="color: #a31515;">"sprite"</span>)</div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">this</span>.<span style="color: #0070c1;">classList</span>.<span style="color: #795e26;">add</span>(<span style="color: #a31515;">"figura"</span>)</div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">this</span>.<span style="color: #001080;">innerHTML</span> = <span style="color: #a31515;">"🦅"</span></div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">this</span>.<span style="color: #0070c1;">style</span>.<span style="color: #001080;">fontSize</span> = <span style="color: #a31515;">"40px"</span></div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">const</span> <span style="color: #0070c1;">r</span> =</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">this</span>.<span style="color: #795e26;">getBoundingClientRect</span>()</div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">this</span>.<span style="color: #0070c1;">style</span>.<span style="color: #001080;">left</span> =</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #a31515;">`</span><span style="color: #0000ff;">${</span><span style="color: #0070c1;">r</span>.<span style="color: #0070c1;">left</span><span style="color: #0000ff;">}</span><span style="color: #a31515;">px`</span></div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">this</span>.<span style="color: #0070c1;">style</span>.<span style="color: #001080;">top</span> = <span style="color: #a31515;">`</span><span style="color: #0000ff;">${</span><span style="color: #0070c1;">r</span>.<span style="color: #0070c1;">top</span><span style="color: #0000ff;">}</span><span style="color: #a31515;">px`</span></div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">this</span>.<span style="color: #0070c1;">style</span>.<span style="color: #001080;">bottom</span> = <span style="color: #a31515;">"auto"</span></div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">this</span>.<span style="color: #0070c1;">style</span>.<span style="color: #001080;">right</span> = <span style="color: #a31515;">"auto"</span></div><div>&nbsp; &nbsp; }</div><br><div>&nbsp; &nbsp; <span style="color: #008000;">/**</span></div><div><span style="color: #008000;">&nbsp; &nbsp; &nbsp;* </span><span style="color: #0000ff;">@param</span><span style="color: #008000;"> </span><span style="color: #267f99;">{HTMLElement}</span><span style="color: #008000;"> </span><span style="color: #001080;">jugador</span></div><div><span style="color: #008000;">&nbsp; &nbsp; &nbsp;* &nbsp; el jugador que es</span></div><div><span style="color: #008000;">&nbsp; &nbsp; &nbsp;* &nbsp; perseguido.</span></div><div><span style="color: #008000;">&nbsp; &nbsp; &nbsp;* </span><span style="color: #0000ff;">@override</span></div><div><span style="color: #008000;">&nbsp; &nbsp; &nbsp;*/</span></div><div>&nbsp; &nbsp; <span style="color: #795e26;">muevete</span>(<span style="color: #001080;">jugador</span>) {</div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">const</span> <span style="color: #0070c1;">r</span> =</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #0000ff;">this</span>.<span style="color: #795e26;">getBoundingClientRect</span>()</div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">const</span> <span style="color: #0070c1;">rJ</span> = <span style="color: #001080;">jugador</span>.</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #795e26;">getBoundingClientRect</span>()</div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">const</span> <span style="color: #0070c1;">y2</span> = <span style="color: #0070c1;">rJ</span>.<span style="color: #0070c1;">top</span></div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">const</span> <span style="color: #0070c1;">y1</span> = <span style="color: #0070c1;">r</span>.<span style="color: #0070c1;">top</span></div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">const</span> <span style="color: #0070c1;">x2</span> = <span style="color: #0070c1;">rJ</span>.<span style="color: #0070c1;">left</span></div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">const</span> <span style="color: #0070c1;">x1</span> = <span style="color: #0070c1;">r</span>.<span style="color: #0070c1;">left</span></div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">const</span> <span style="color: #0070c1;">pendiente</span> = <span style="color: #0070c1;">x2</span> === <span style="color: #0070c1;">x1</span> ?</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #098658;">0</span> :</div><div>&nbsp; &nbsp; &nbsp; (<span style="color: #0070c1;">y2</span> - <span style="color: #0070c1;">y1</span>) / (<span style="color: #0070c1;">x2</span> - <span style="color: #0070c1;">x1</span>)</div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">const</span> <span style="color: #0070c1;">dirección</span> =</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #0070c1;">x2</span> &gt; <span style="color: #0070c1;">x1</span> ? <span style="color: #098658;">1</span> : -<span style="color: #098658;">1</span></div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">const</span> <span style="color: #0070c1;">x</span> = <span style="color: #0070c1;">x1</span> + <span style="color: #0070c1;">dirección</span> * <span style="color: #098658;">5</span></div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">const</span> <span style="color: #0070c1;">y</span> =</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #0070c1;">pendiente</span> * (<span style="color: #0070c1;">x</span> - <span style="color: #0070c1;">x1</span>) + <span style="color: #0070c1;">y1</span></div><div>&nbsp; &nbsp; &nbsp;<span style="color: #008000;">/* Evita que las figuras se</span></div><div><span style="color: #008000;">&nbsp; &nbsp; &nbsp; * peguen, añadiendo un</span></div><div><span style="color: #008000;">&nbsp; &nbsp; &nbsp; * movimiento aleatorio. */</span></div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">this</span>.<span style="color: #0070c1;">style</span>.<span style="color: #001080;">left</span> =</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #a31515;">`</span><span style="color: #0000ff;">${</span><span style="color: #795e26;">desvía</span>(<span style="color: #0070c1;">x</span>)<span style="color: #0000ff;">}</span><span style="color: #a31515;">px`</span></div><div>&nbsp; &nbsp; &nbsp;<span style="color: #0000ff;">this</span>.<span style="color: #0070c1;">style</span>.<span style="color: #001080;">top</span> =</div><div>&nbsp; &nbsp; &nbsp; <span style="color: #a31515;">`</span><span style="color: #0000ff;">${</span><span style="color: #795e26;">desvía</span>(<span style="color: #0070c1;">y</span>)<span style="color: #0000ff;">}</span><span style="color: #a31515;">px`</span></div><div>&nbsp; &nbsp; }</div><div>&nbsp; &nbsp;})</div><br><div>&nbsp; <span style="color: #008000;">/**</span></div><div><span style="color: #008000;">&nbsp; &nbsp;* Obtiene una desviación</span></div><div><span style="color: #008000;">&nbsp; &nbsp;* aleatoria de 10 alrededor del</span></div><div><span style="color: #008000;">&nbsp; &nbsp;* valor i.</span></div><div><span style="color: #008000;">&nbsp; &nbsp;* @param {number} i valor base</span></div><div><span style="color: #008000;">&nbsp; &nbsp;*/</span></div><div>&nbsp; <span style="color: #0000ff;">function</span> <span style="color: #795e26;">desvía</span>(<span style="color: #001080;">i</span>) {</div><div>&nbsp; &nbsp;<span style="color: #af00db;">return</span> <span style="color: #001080;">i</span> + <span style="color: #098658;">10</span> -</div><div>&nbsp; &nbsp; <span style="color: #098658;">20</span> * <span style="color: #267f99;">Math</span>.<span style="color: #795e26;">random</span>()</div><div>&nbsp; }</div><div>&nbsp;<span style="color: #800000;">&lt;/script&gt;</span></div><div><span style="color: #800000;">&lt;/head&gt;</span></div><br><div><span style="color: #800000;">&lt;body&gt;</span></div><div>&nbsp;<span style="color: #800000;">&lt;jugador-paloma&gt;&lt;/jugador-paloma&gt;</span></div><div>&nbsp;<span style="color: #800000;">&lt;figura-aguila</span></div><div>&nbsp; &nbsp;<span style="color: #ff0000;">style</span>=<span style="color: #0000ff;">"</span><span style="color: #0000ff;">right: 0; top: 0;</span><span style="color: #0000ff;">"</span><span style="color: #800000;">&gt;</span></div><div>&nbsp;<span style="color: #800000;">&lt;/figura-aguila&gt;</span></div><div>&nbsp;<span style="color: #800000;">&lt;figura-aguila</span></div><div>&nbsp; &nbsp;<span style="color: #ff0000;">style</span>=<span style="color: #0000ff;">"</span><span style="color: #0000ff;">right: 0; bottom: 0;</span><span style="color: #0000ff;">"</span><span style="color: #800000;">&gt;</span></div><div>&nbsp;<span style="color: #800000;">&lt;/figura-aguila&gt;</span></div><div>&nbsp;<span style="color: #800000;">&lt;script&gt;</span></div><div>&nbsp; <span style="color: #008000;">//@ts-check</span></div><div>&nbsp; <span style="color: #0000ff;">const</span> <span style="color: #0070c1;">juego2</span> = <span style="color: #0000ff;">new</span> <span style="color: #267f99;">Juego2</span>()</div><div>&nbsp; <span style="color: #0070c1;">juego2</span>.<span style="color: #795e26;">inicia</span>()</div><div>&nbsp;<span style="color: #800000;">&lt;/script&gt;</span></div><div><span style="color: #800000;">&lt;/body&gt;</span></div><br><div><span style="color: #800000;">&lt;/html&gt;</span></div></div></muestra-codigo>
</div>