<!DOCTYPE html>
<html lang="es">

<head>

 <meta charset="UTF-8">
 <meta name="viewport"
   content="width=device-width">
 <title>
  Single Page Application 2
 </title>

 <style>
  nav {
   display: flex;
   align-items: center;
   flex-wrap: wrap;
   align-content: center;
   list-style-type: none;
   gap: 0.5rem;
  }

  main {
   /* Los elementos tppo main
    * llevan una transición con
    * nombre main. */
   view-transition-name: main;
  }

  @keyframes desplazaALaDerecha {
   from {
    transform: translateX(100vw);
   }
  }

  @keyframes desplazaALaIzquierda {
   to {
    transform: translateX(-100vw);
   }
  }

  ::view-transition-old(main) {
   animation-name:
    desplazaALaIzquierda;
   animation-duration: 2s;
  }

  ::view-transition-new(main) {
   animation-name:
    desplazaALaDerecha;
   animation-duration: 2s;
  }
 </style>

</head>

<body>

 <nav>
  <a href="inicio">Inicio</a>
  <a href="acercade">Acerca de</a>
  <a href="contacto">Contacto</a>
 </nav>

 <main id="inicio">
  <h1>
   Single Page Application 2
  </h1>
  <p>
   Esta es la página principal.
  </p>
 </main>

 <main id="acercade" hidden>
  <h1>Acerca de</h1>
  <p>
   Esta es la página Acerca de.
  </p>
 </main>

 <main id="contacto" hidden>
  <h1>Contacto</h1>
  <p>
   Esta es la página Contacto.
  </p>
 </main>

 <footer>
  <p>
   © 2025
   Gilberto Pacheco Gallegos.
  </p>
 </footer>

 <script>

  const titulos = new Map([
   [
    "inicio",
    "Single Page Application 2"
   ],
   [
    "acercade",
    "Acerca de - Single Page Application 2"
   ],
   [
    "contacto",
    "Contacto - Single Page Application 2"
   ],
  ])

  const vistas =
   [inicio, acercade, contacto]

  document.addEventListener("click",
   event => {
    event.preventDefault()
    const target = event.target
    if (
     target instanceof HTMLAnchorElement
    ) {
     try {
      const href = target.href
      const estado =
       href.substring(
        href.lastIndexOf("/") + 1
       )
      transicion(estado)
      history.pushState(
       estado, "", location.href
      )
     } catch (err) {
      console.error(err)
     }
    }
   })

  window.addEventListener(
   "popstate",
   event => {
    if (
     typeof event.state === "string"
    ) {
     transicion(event.state)
    }
   }
  )

  history.replaceState(
   "inicio", "", location.href
  )

  /**
   * @param {string} estado
   */
  function muestraVista(estado) {
   document.title =
    titulos.get(estado) ?? ""
   for (const vista of vistas) {
    vista.hidden =
     estado !== vista.id
   }
  }
  /**
   * @param {string} estado
   */
  function transicion(estado) {
   if (
    typeof document.startViewTransition === "function"
   ) {
    document.startViewTransition(
     () => muestraVista(estado)
    )
   } else {
    muestraVista(estado)
   }
  }

 </script>

</body>

</html>