<!DOCTYPE html>
<html lang="es">

<head>
 <meta charset="UTF-8">
 <meta name="viewport"
   content="width=device-width">
 <title>Formulario</title>
</head>

<body>
 <form id="form" novalidate
   action="javascript:procesa()">
  <h1>Formulario</h1>
  <p>
   <label for="inGenero">
    *Género
   </label>
   <select id="inGenero" required
     oninput="copiaMensajes()">
    <option value=""></option>
    <option value="pop">
     Pop
    </option>
    <option value="reg">
     Reguetón
    </option>
   </select>
   <small id="msgGenero">
    *Requerido
   </small>
  </p>
  <p>
   <button>Recomendar</button>
  </p>
 </form>
 <script>
  // @ts-check
  const REQUERIDO = "*Requerido"

  function procesa() {
   try {
    copiaMensajes()
    if (inGenero.validity.valid) {
     const genero = inGenero.value
     const resultado =
      recomienda(genero)
     alert(resultado)
    }
   } catch (e) {
    muestraError(e)
   }
  }

  /** @param {string} genero */
  function recomienda(genero) {
   if (genero === "pop") {
    return "Para el pop te " +
     "recomiendo a Dua Lipa."
   } else if (genero === "reg") {
    return "Para el reguetón te " +
     "recomiendo a Bad Bunny."
   }
  }

  function copiaMensajes() {
   msg(inGenero, msgGenero,
    REQUERIDO)
  }

  /**
   * Muestra un error en la consola
   * y un cuadro de alerta con el
   * mensaje.
   * @param {Error} e descripción
   *  del error.
   */
  function muestraError(e) {
   console.error(e)
   alert(e.message)
  }

  /**
   * Sin un elemento tiene un
   * mensaje de validación, lo
   * muestra en su elemento de
   * ayuda y si no, muestra un
   * texto de ayuda. 
   * @param {HTMLInputElement|
   *  HTMLTextAreaElement|
   *  HTMLSelectElement|
   *  HTMLOutputElement|null} e
   * referencia a un elemento que
   * contiene datos.
   * @param {HTMLElement|null} out
   * elemento de ayuda para e.
   * @param {string} ok mensaje de
   * ayuda cuando el estado de e es
   * válido.
   */
  function msg(e, out, ok) {
   if (e !== null
    && out !== null) {
    if (e.validity.valid) {
     out.textContent = ok
    } else {
     out.textContent =
      e.validationMessage
    }
   }
  }
 </script>
</body>

</html>