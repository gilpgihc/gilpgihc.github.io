<!DOCTYPE html>
<html lang="es">

<head>
 <meta charset="UTF-8">
 <meta name="viewport"
   content="width=device-width">
 <title>Campos</title>
 <link rel="preconnect"
   href="https://fonts.googleapis.com">
 <link rel="preconnect"
   href="https://fonts.gstatic.com"
   crossorigin>
 <link rel="stylesheet"
   href="https://fonts.googleapis.com/css2?family=Roboto&display=swap">
 <style>
  html {
   --Font: -apple-system,
    BlinkMacSystemFont, Roboto,
    sans-serif;
   --BodyLargeFont: var(--Font);
   --BodyLargeSize: 16px;
   --BodyLargeWeight: 400;
   --BodySmallFont: var(--Font);
   --BodySmallSize: 12px;
   --BodySmallWeight: 400;
   --Background: #FFFBFE;
   --OnBackground: #1C1B1F;
   --Surface: #FFFBFE;
   --OnSurface: #1C1B1F;
   --OnSurfaceHover: #1C1B1F14;
   --OnSurfaceFocus: #1C1B1F19;
   --OnSurfacePressed: #1C1B1F1E;
   --OnSurfaceShadow: #1C1B1F99;
   --SurfaceVariant: #E7E0EC;
   --SurfaceVariantHover:
    #CAC4D0;
   --OnSurfaceVariant: #49454F;
   --Primary: #6750A4;
   --OnPrimary: #FFFFFF;
   --Error: #B3261E;
   --OnErrorContainer: #F2B8B5;
   --Elevation: #F5EEFA;
   --ShapeCornerMedium: 12px;
   --ShapeCornerExtraSmall: 4px;
   --ElevationLevel2:
    0 3px 6px 0px var(--OnSurfaceShadow);
   font-size: 16px;
   font-family: var(--Font);
   color: var(--OnBackground);
   background-color:
    var(--Background);
  }

  /* Quita un borde rojo que coloca
   * Firefox. */
  :-moz-ui-invalid {
   box-shadow: none;
  }
 </style>
 <script>
  // @ts-check
  const INVALID_CLASS = "invalid"
  const POPULATED_CLASS =
   "populated"
  const OPEN_CLASS = "open"
  const SELECTED_CLASS = "selected"
  const TARGET_NAME =
   'name="target"'
  const SUPPORTING_NAME =
   'name="supporting"'
  const MENU_NAME = 'name="menu"'
  const VALUE_PROPERTY = "value"
  const GET_VALUE_PROPERTY =
   "getValue"
  const SET_VALUE_PROPERTY =
   "setValue"
  const CHECK_VALIDITY_PROPERTY =
   "checkValidity"

  class TextField
   extends HTMLElement {

   constructor() {
    super()
    /**
     * @private
     * @type {ShadowRoot}
     */
    this._shadow =
     this.attachShadow(
      {
       mode: "open",
       delegatesFocus: true
      })
    this._shadow.innerHTML =
     /* html */
     `<style>
      :host {
       display: block;
       position: relative;
       margin: 1rem;
       border-top-left-radius:
        var(--ShapeCornerExtraSmall);
       border-top-right-radius:
        var(--ShapeCornerExtraSmall);
       background-color:
        var(--SurfaceVariant);
      }

      :host(::after) {
      }

      label {
       border-top-left-radius:
        var(--ShapeCornerExtraSmall);
       border-top-right-radius:
        var(--ShapeCornerExtraSmall);
       background-color:
        var(--SurfaceVariant);
       background-color:
        var(--SurfaceVariant);
       display: block;
       cursor: pointer;
       padding: 24px 0 0 0;
      }

      ::slotted(span) {
       color:
        var(--OnSurfaceVariant);
       font-family:
        var(--BodyLargeFont);
       font-size:
        var(--BodyLargeSize);
       font-weight:
        var(--BodyLargeWeight);
       position: absolute;
       top: 24px;
       left: 1rem;
       transition: 0.3s ease-in;
      }

      :host(:focus-within) ::slotted(span),
      :host(.${POPULATED_CLASS}) ::slotted(span),
      :host(.float) ::slotted(span) {
       transform: translateY(-16px);
       font-size:
        var(--BodySmallSize);
      }

      [${TARGET_NAME}]::slotted(*) {
       border-bottom-width: 1px;
       border-bottom-style: solid;
       border-bottom-color:
       var(--OnSurfaceVariant);
       caret-color:
        var(--Primary);
       color: var(--OnSurface);
       font-family:
        var(--BodyLargeFont);
       font-size:
        var(--BodyLargeSize);
       font-weight:
        var(--BodyLargeWeight);
       border-top: none;
       border-left: none;
       border-right: none;
       display: block;
       box-sizing: border-box;
       padding: 0 16px 8px 16px;
       background-color:
        transparent;
       resize: none;
       outline: none;
       width: 100%;
       transition: 0.3s ease-in;
      }

      [${TARGET_NAME}]::slotted(input) {
       height: 32px;
       line-height: 23px;
      }

      [${SUPPORTING_NAME}]::slotted(*) {
       color:
        var(--OnSurfaceVariant);
       font-family:
        var(--BodySmallFont);
       font-size:
        var(--BodySmallSize);
       font-weight:
        var(--BodySmallWeight);
       padding: 4px 16px 0 16px;
       background-color:
        var(--Surface);
       display: block;
       transition: 0.3s ease-in;
      }

      :host(:focus-within) ::slotted(span)  {
       color: var(--Primary);
      }

      [${TARGET_NAME}]::slotted(:focus) {
       border-bottom-width: 2px;
       border-bottom-color:
        var(--Primary);
       padding-bottom: 7px;
       outline: none;
      }

      :host(:hover) label {
       background-color:
        var(--SurfaceVariantHover);
      }

      :host(:hover) [${TARGET_NAME}]::slotted(*) {
       border-bottom-width: 1px;
       border-bottom-color:
        var(--OnSurface);
        padding-bottom: 8px;
      }

      [${TARGET_NAME}]::slotted(:invalid),
      [${TARGET_NAME}]::slotted(:focus:invalid) {
       border-bottom-color:
        var(--Error);
      }
      
      :host(.${INVALID_CLASS}) ::slotted(span) {
       color: var(--Error);
      }

      :host(.${INVALID_CLASS}) [${SUPPORTING_NAME}]::slotted(*) {
       color: var(--Error);
      }

      [${TARGET_NAME}]::slotted(:focus:invalid) {
       caret-color: var(--Error);
      }

      :host(:hover) [${TARGET_NAME}]::slotted(:invalid) {
       border-bottom-color:
        var(--OnErrorContainer);
      }

      :host(.${INVALID_CLASS}:hover) ::slotted(span) {
       color: var(--OnSurfaceVariant);
      }

      :host(.${INVALID_CLASS}:hover:focus-within) ::slotted(span) {
       color: var(--Error);
      }
      :host(.${INVALID_CLASS}:hover) [${TARGET_NAME}]::slotted(*:focus) {
       border-bottom-width: 2px;
       padding-bottom: 7px;
      }

      [${MENU_NAME}]::slotted(*) {
       position: absolute;
       right: 0;
       left: 0;
       top: 57px;
      }
     </style>
     <label>
      <slot ${TARGET_NAME}></slot>
      <slot></slot>
     </label>
     <slot
      ${SUPPORTING_NAME}></slot>
     <slot ${MENU_NAME}></slot>`
    this._alterna =
     this._alterna.bind(this)
    this._abre =
     this._abre.bind(this)
    this._cierra =
     this._cierra.bind(this)
    this._onChange =
     this._onChange.bind(this)
    this._onInput =
     this._onInput.bind(this)
    /**
     * @private
     * @type {HTMLSlotElement|
     *        null}
     */
    this._target = this._shadow.
     querySelector(
      `[${TARGET_NAME}]`)
    /**
     * @private
     * @type {HTMLSlotElement|
     *        null}
     */
    this._menu = this._shadow.
     querySelector(
      `[${MENU_NAME}]`)
    /**
     * @private
     * @type {Element| null}
     */
    this._targetElement = null
    /**
     * @private
     * @type {Element|null}
     */
    this._menuElement = null
    if (this._target !== null) {
     this._target.addEventListener(
      "slotchange",
      () => this._configTarget())
    }
    if (this._menu !== null) {
     this._menu.
      addEventListener(
       "slotchange", () =>
       this._configMenu())
    }
   }

   /** @private */
   _configTarget() {
    if (this._target !== null) {
     for (const t of this._target
      .assignedElements()) {
      if (this._targetElement
       !== null) {
       this._targetElement.
        removeEventListener(
         "input", this._onInput)
       this._targetElement.
        removeEventListener(
         "click", this._alterna)
      }
      this._targetElement = t
      t.addEventListener("input",
       this._onInput)
      t.addEventListener("click",
       this._alterna)
      this._inicia()
     }
    }
   }

   /** @private */
   _configMenu() {
    if (this._menu !== null) {
     for (const e of this._menu
      .assignedElements()) {
      if (this._menuElement
       !== null) {
       const inputs =
        this._menuElement.
         querySelectorAll("input")
       for (const i
        of Array.from(inputs)) {
        i.removeEventListener(
         "change", this._onChange,
         { capture: true })
       }
      }
      this._menuElement = e
      const inputs =
       e.querySelectorAll("input")
      const arr =
       Array.from(inputs)
      for (const i of arr) {
       i.addEventListener(
        "change", this._onChange,
        { capture: true })
      }
      this._inicia()
     }
    }
   }

   /** @private */
   _alterna() {
    if (this._menuElement
     &&
     this._menuElement.classList.
      contains(OPEN_CLASS)) {
     this._cierra()
    } else {
     this._abre()
    }
   }

   /** @private */
   _abre() {
    if (this._menuElement
     !== null) {
     this._menuElement.classList.
      add(OPEN_CLASS)
     const input =
      this.querySelector("input")
     if (input) {
      input.focus()
     }
     this.addEventListener(
      "focusout", this._cierra, { capture: false })
    }
   }

   /** @private */
   _cierra() {
    if (this._menuElement
     !== null) {
     this.removeEventListener(
      "focusout", this._cierra, { capture: false })
     this._menuElement.classList.
      remove(OPEN_CLASS)
    }
   }

   /** @private */
   _inicia() {
    const m = this._menuElement
    if (m !== null) {
     const t = this._targetElement
     if (t !== null) {
      t.removeEventListener(
       "input", this._onInput)
      t.addEventListener(
       "keydown",
       /**
        * @param {KeyboardEvent
        *        } evt
        */
       evt => {
        const key = evt.key
        if (key !== "Tab") {
         evt.preventDefault()
         this._alterna()
        }
       })
      const inputs =
       m.querySelectorAll("input")
      for (const i
       of Array.from(inputs)) {
       const parent =
        i.parentElement
       if (parent) {
        if (i.dataset.checked
         === "true") {
         i.checked = true
         parent.classList.
          add(SELECTED_CLASS)
         const text =
          parent.textContent.trim()
         this.setText(text)
        } else {
         parent.classList.
          remove(SELECTED_CLASS)
        }
       }
      }
     }
    }
    this.analiza()
   }

   /** @private */
   _onChange() {
    const m = this._menuElement
    if (m !== null) {
     const inputs =
      m.querySelectorAll("input")
     for (const i
      of Array.from(inputs)) {
      const parent =
       i.parentElement
      if (parent) {
       if (i.checked) {
        parent.classList.
         add(SELECTED_CLASS)
        const text =
         parent.textContent.trim()
        this.setText(text)
       } else {
        parent.classList.
         remove(SELECTED_CLASS)
       }
      }
     }
     this._cierra()
    }
    this.analiza()
   }

   _onInput() {
    const m = this._menuElement
    if (m !== null) {
     const text =
      this.getText().trim()
     const inputs = this.
      _menuElement.
      querySelectorAll("input")
     for (const i
      of Array.from(inputs)) {
      const parent =
       i.parentElement
      if (parent) {
       if (text === parent
        .textContent.trim()) {
        i.checked = true
        parent.classList.
         add(SELECTED_CLASS)
       } else {
        i.checked = false
        parent.classList.
         remove(SELECTED_CLASS)
       }
      }
     }
    }
    this.analiza()
   }

   analiza() {
    const t = this._targetElement
    if (t !== null) {
     let value = ""
     if (
      VALUE_PROPERTY in t) {
      value = t[VALUE_PROPERTY]
     } else if (
      typeof t[GET_VALUE_PROPERTY]
      === "function") {
      value =
       t[GET_VALUE_PROPERTY]()
     }
     if (value === null
      || value === undefined) {
      value = ""
     }
     if (value === "") {
      this.classList.
       remove(POPULATED_CLASS)
     } else {
      this.classList.
       add(POPULATED_CLASS)
     }
     if (typeof t[
      CHECK_VALIDITY_PROPERTY]
      === "function") {
      if (t[
       CHECK_VALIDITY_PROPERTY
      ]()) {
       this.classList.
        remove(INVALID_CLASS)
      } else {
       this.classList.
        add(INVALID_CLASS)
      }
     }
     this._selectedValue = null
    }
   }

   /** @returns {string} */
   getText() {
    const t = this._targetElement
    if (t !== null) {
     if (
      VALUE_PROPERTY in t) {
      return t[VALUE_PROPERTY]
     } else if (
      typeof t[GET_VALUE_PROPERTY]
      === "function") {
      return t[
       GET_VALUE_PROPERTY]()
     }
    }
    return ""
   }

   /** @param {string} text */
   setText(text) {
    const t = this._targetElement
    if (t !== null) {
     if (
      VALUE_PROPERTY in t) {
      t[VALUE_PROPERTY] = text
     } else if (typeof
      t[SET_VALUE_PROPERTY]
      === "function") {
      t[SET_VALUE_PROPERTY](text)
     }
    }
   }
  }

  customElements.
   define("text-field", TextField)
 </script>
 <style>
  [slot="menu"] {
   display: block;
   pointer-events: none;
   transform: translateY(-50%) scaleY(0);
   transition: transform 0.5s;
   box-sizing: border-box;
   padding: 4px 0;
   border-radius:
    var(--ShapeCornerMedium);
   background-color:
    var(--Elevation);
   cursor: default;
   box-shadow:
    var(--ElevationLevel2);
  }

  [slot="menu"].open {
   pointer-events: all;
   transform: translateY(0) scaleY(1);
  }

  [slot="menu"]>* {
   display: block;
   border: none;
   background-color:
    transparent;
   color: var(--OnSurface);
   font-family:
    var(--LabelLargeFont);
   font-size:
    var(--LabelLargeSize);
   font-weight:
    var(--LabelLargeWeight);
   box-sizing: border-box;
   padding: 4px 0;
   width: 100%;
   height: 48px;
   line-height: 48px;
   padding: 0 12px;
   white-space: nowrap;
   text-overflow: ellipsis;
   overflow: hidden;
   text-align: start;
  }

  [slot="menu"]>*:hover {
   background-color:
    var(--OnSurfaceHover);
  }

  [slot="menu"]>*:focus {
   background-color:
    var(--OnSurfaceFocus);
  }

  [slot="menu"]>*:active {
   background-color:
    var(--Primary);
   background-position: center;
   background-image: radial-gradient(circle, transparent 1%, var(--SurfaceVariant) 1%);
   background-size: 100%;
   animation-fill-mode: forwards;
   animation-name: ripple;
   animation-duration: 0.5s;
  }

  @keyframes ripple {
   from {
    color: var(--OnSurfaceVariant);
    background-size: 100%;
   }

   to {
    color: var(--OnPrimary);
    background-size: 15000%;
   }
  }

  [slot="menu"] span {
   vertical-align: middle;
   margin-right: 12px;
  }

  text-field [slot="menu"] {
   z-index: 1;
   border-top-left-radius: 0;
   border-top-right-radius: 0;
  }

  text-field [slot="menu"]>.selected {
   color: var(--OnPrimary);
   background-color: var(--Primary);
  }

  text-field [slot="menu"] input {
   display: none;
  }

  text-field [slot="menu"]+input {
   background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='5' width='32'%3E%3Cpath d='M21 4 16 0 26 0 Z' fill='%2349454E' /%3E%3C/svg%3E");
   background-repeat: no-repeat;
   background-position-x: right;
   background-position-y: 20%;
   padding-right: 32px;
   cursor: pointer;
  }

  text-field [slot="menu"].open+input {
   background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='5' width='32'%3E%3Cpath d='M21 0 16 4 26 4 Z' fill='%2349454E' /%3E%3C/svg%3E");
  }

  select {
   -webkit-appearance: none;
   -moz-appearance: none;
   background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='5' width='32'%3E%3Cpath d='M21 4 16 0 26 0 Z' fill='%2349454E' /%3E%3C/svg%3E");
   background-repeat: no-repeat;
   background-position-x: right;
   background-position-y: 20%;
   padding-right: 32px;
   transition: 0.3s ease-in;
  }

  select:focus {
   background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='5' width='32'%3E%3Cpath d='M21 0 16 4 26 4 Z' fill='%2349454E' /%3E%3C/svg%3E");
  }

  option {
   background-color:
    var(--Elevation);
   color: var(--OnSurface);
   font-family:
    var(--LabelLargeFont);
   font-size:
    var(--LabelLargeSize);
   font-weight:
    var(--LabelLargeWeight);
   box-sizing: border-box;
   padding: 4px 0;
   width: 100%;
   height: 48px;
   line-height: 48px;
   padding: 0 12px;
   white-space: nowrap;
   text-overflow: ellipsis;
   overflow: hidden;
   text-align: start;
  }

  option:hover {
   background-color:
    var(--OnSurfaceHover);
  }

  option:checked {
   color: var(--OnPrimary);
   background-color:
    var(--Primary);
  }
 </style>
</head>

<body>
 <h1>Campos</h1>
 <section style="max-width: 600px;
   margin: 0 auto">
  <text-field>
   <output slot="target">
    Hola
   </output>
   <span>Saludo</span>
  </text-field>
  <text-field>
   <input slot="target" required>
   <span>Nombre*</span>
   <small slot="supporting">
    *Requerido
   </small>
  </text-field>
  <text-field>
   <input slot="target"
     type="email">
   <span>Email</span>
  </text-field>
  <text-field class="float">
   <input slot="target"
     type="date">
   <span>Fecha</span>
  </text-field>
  <text-field>
   <div slot="menu">
    <label>
     <input type="radio"
       name="grupo" value="">
    </label>
    <label>
     <input type="radio"
       name="grupo" value="IC21">
     IC-21
    </label>
    <label>
     <input type="radio"
       data-checked="true"
       name="grupo" value="IC22">
     IC-22
    </label>
    <label>
     <input type="radio"
       name="grupo" value="IC23">
     IC-23
    </label>
   </div>
   <input slot="target" required>
   <span>Grupo</span>
  </text-field>
  <text-field>
   <select slot="target">
    <option value=""></option>
    <option value="IC21">
     IC-21
    </option>
    <option value="IC22">
     IC-22
    </option>
    <option value="IC23">
     IC-23
    </option>
   </select>
   <span>Grupo</span>
  </text-field>
  <text-field>
   <textarea rows="3"
     slot="target"></textarea>
   <span>Dirección</span>
  </text-field>
 </section>
</body>

</html>